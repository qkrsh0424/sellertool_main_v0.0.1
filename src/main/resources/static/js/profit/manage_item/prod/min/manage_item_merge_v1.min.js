function loadCategoryHtml(){return{setCategoyBreadcrumb:function(){let t=SELECTED_CLASSIFY.category,e="";0!==t.category1Id&&(e+=""+t.category1Name),0!==t.category2Id&&(e+=" > "+t.category2Name),0!==t.category3Id&&(e+=" > "+t.category3Name),0!==t.category4Id&&(e+=" > "+t.category4Name);let a=`\n                <div class="st-mitem-wrapper">\n                    <div class="st-mitem-box">\n                    <div class="st-mitem-title-box">\n                                    <h4 class="st-mitem-title-el">\n                                        카테고리\n                                    </h4>\n                                </div>\n                        <div class="row st-mitem-content-box">\n                            <div class="col-sm-8">\n                                <div class="ty-st-mitem-category-el st-mitem-breadcrumb">\n                                    <span>카테고리 구성 : </span><span id="i_mitem_breadcrumb_list">${e}</span>\n                                </div>\n                            </div>\n                            <div class="ty-st-mitem-category-el col-sm-4" id="i_mitem_category_update_button_group">\n                                <button type="type" class="btn btn-block btn-outline-primary" onclick="eventCategoryHandler().categoryUpdateBtnClick().openUpdate()">카테고리 재설정</button>\n                            </div>\n                        </div>\n                        <div id="i_mitem_category_list">\n                        </div>\n                    </div>\n                    \n                </div>\n            `;return{set:function(){return $("#i_mitem_category_breadcrumb").html(a)},clear:function(){return $("#i_mitem_category_breadcrumb").html("")}}},setCategoryList:function(){return{set:function(){$("#i_mitem_category_list").html('\n                <div class="st-mitem-content-box">\n                    <div class="st-mitem-category-wrapper">\n                        <div class="row">\n                            <div class="col-sm-3 mt-1 mb-1 st-mitem-category-box">\n                                <label class="st-mitem-required-text">*카테고리1 (필수)</label>\n                                <div id="i_mitem_category1_list" class="st-mitem-category-list-box">\n\n                                </div>\n                            </div>\n                            <div class="col-sm-3 mt-1 mb-1 st-mitem-category-box">\n                                <label class="st-mitem-required-text">*카테고리2 (필수)</label>\n                                <div id="i_mitem_category2_list" class="st-mitem-category-list-box">\n\n                                </div>\n                            </div>\n                            <div class="col-sm-3 mt-1 mb-1 st-mitem-category-box">\n                                <label>카테고리3 (선택)</label>\n                                <div id="i_mitem_category3_list" class="st-mitem-category-list-box">\n\n                                </div>\n                            </div>\n                            <div class="col-sm-3 mt-1 mb-1 st-mitem-category-box">\n                                <label>카테고리4 (선택)</label>\n                                <div id="i_mitem_category4_list" class="st-mitem-category-list-box">\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ')},clear:function(){$("#i_mitem_category_list").html("")}}},setCategoryEls:function(){return{category1:function(){let t="";CATEGORY1.forEach(e=>{t+=`\n                            <button type="button" id="category1Btn_${e.id}" class="btn btn-lg btn-block" onclick="eventCategoryHandler().categoryElClick().category1('${e.id}','${e.name}')">${e.name}</button>\n                        `}),$("#i_mitem_category1_list").html(t)},category2:function(){let t="";CATEGORY2.forEach(e=>{t+=`\n                            <button type="button" id="category2Btn_${e.id}" class="btn btn-lg btn-block" onclick="eventCategoryHandler().categoryElClick().category2('${e.id}','${e.name}')">${e.name}</button>\n                        `}),$("#i_mitem_category2_list").html(t)},category3:function(){let t="";CATEGORY3.forEach(e=>{t+=`\n                            <button type="button" id="category3Btn_${e.id}" class="btn btn-lg btn-block" onclick="eventCategoryHandler().categoryElClick().category3('${e.id}','${e.name}')">${e.name}</button>\n                        `}),$("#i_mitem_category3_list").html(t)},category4:function(){let t="";CATEGORY4.forEach(e=>{t+=`\n                            <button type="button" id="category4Btn_${e.id}" class="btn btn-lg btn-block" onclick="eventCategoryHandler().categoryElClick().category4('${e.id}','${e.name}')">${e.name}</button>\n                        `}),$("#i_mitem_category4_list").html(t)}}},setCategoryUpdateBtnGroup:function(){return{setSaveAndClose:function(){$("#i_mitem_category_update_button_group").html('\n                        <div class="row">\n                            <div class="col-sm-6 form-group">\n                                <button type="type" class="btn btn-block btn-outline-danger" onclick="eventCategoryHandler().categoryUpdateBtnClick().closeUpdate()">취소하기</button>\n                            </div>\n                            <div class="col-sm-6 form-group">\n                                <button type="type" class="btn btn-block btn-outline-success" onclick="eventCategoryHandler().categoryUpdateBtnClick().saveUpdate()">저장하기</button>\n                            </div>\n                        </div>\n                        \n                    ')},setOpen:function(){$("#i_mitem_category_update_button_group").html('\n                        <button type="type" class="btn btn-block btn-outline-primary" onclick="eventCategoryHandler().categoryUpdateBtnClick().openUpdate()">카테고리 재설정</button>\n                    ')}}}}}function eventCategoryHandler(){return{categoryUpdateBtnClick:function(){return{openUpdate:async function(){loadCategoryHtml().setCategoryUpdateBtnGroup().setSaveAndClose(),$("#i_mitem_breadcrumb_list").html(""),loadCategoryHtml().setCategoryList().set(),await dataConnect().getCategorys().getCategory1(),loadCategoryHtml().setCategoryEls().category1()},saveUpdate:async function(){0!=SELECTED_CATEGORY.category1Id&&0!=SELECTED_CATEGORY.category2Id?(await dataConnect().updateCategoryData(),await dataConnect().getClassifys(),classifyObjectControl().updateSelectedClassify(),this.closeUpdate()):alert("카테고리1과 카테고리2는 필수 선택입니다.")},closeUpdate:function(){loadCategoryHtml().setCategoyBreadcrumb().set(),SELECTED_CATEGORY.category1Id=0,SELECTED_CATEGORY.category1Name="",SELECTED_CATEGORY.category2Id=0,SELECTED_CATEGORY.category2Name="",SELECTED_CATEGORY.category3Id=0,SELECTED_CATEGORY.category3Name="",SELECTED_CATEGORY.category4Id=0,SELECTED_CATEGORY.category4Name=""}}},categoryElClick:function(){return{category1:async function(t,e){SELECTED_CATEGORY.category1Id=t,SELECTED_CATEGORY.category1Name=e,SELECTED_CATEGORY.category2Id=0,SELECTED_CATEGORY.category2Name="",SELECTED_CATEGORY.category3Id=0,SELECTED_CATEGORY.category3Name="",SELECTED_CATEGORY.category4Id=0,SELECTED_CATEGORY.category4Name="",$("#i_mitem_category3_list").html(""),$("#i_mitem_category4_list").html(""),loadCategoryHtml().setCategoryEls().category1(),$("#category1Btn_"+t).css("background","#1d5a8d"),$("#category1Btn_"+t).css("color","white"),await dataConnect().getCategorys().getCategory2(),loadCategoryHtml().setCategoryEls().category2()},category2:async function(t,e){SELECTED_CATEGORY.category2Id=t,SELECTED_CATEGORY.category2Name=e,SELECTED_CATEGORY.category3Id=0,SELECTED_CATEGORY.category3Name="",SELECTED_CATEGORY.category4Id=0,SELECTED_CATEGORY.category4Name="",$("#i_mitem_category4_list").html(""),loadCategoryHtml().setCategoryEls().category2(),$("#category2Btn_"+t).css("background","#1d5a8d"),$("#category2Btn_"+t).css("color","white"),await dataConnect().getCategorys().getCategory3(),loadCategoryHtml().setCategoryEls().category3()},category3:async function(t,e){SELECTED_CATEGORY.category3Id=t,SELECTED_CATEGORY.category3Name=e,SELECTED_CATEGORY.category4Id=0,SELECTED_CATEGORY.category4Name="",loadCategoryHtml().setCategoryEls().category3(),$("#category3Btn_"+t).css("background","#1d5a8d"),$("#category3Btn_"+t).css("color","white"),await dataConnect().getCategorys().getCategory4(),loadCategoryHtml().setCategoryEls().category4()},category4:async function(t,e){SELECTED_CATEGORY.category4Id=t,SELECTED_CATEGORY.category4Name=e,loadCategoryHtml().setCategoryEls().category4(),$("#category4Btn_"+t).css("background","#1d5a8d"),$("#category4Btn_"+t).css("color","white")}}}}}function loadClassifyHtml(){return{setClassifySelect:function(){return{set:function(){let t="";CLASSIFYS.forEach(e=>{t+=`\n                            <span class="" id="i_mitem_classify_select_el_box_${e.classifyUuid}">\n                                <button id="i_ty_mitem_classify_select_el_btn_${e.classifyUuid}" class="btn ty-st-mItem-item-btn" onclick="eventClassifyHandler().classifyInfoOpenClick('${e.classifyUuid}')">${e.classifyName}</button>\n                            </span>\n                        `});let e=`\n                        <div class="st-mitem-wrapper">\n                            <div class="st-mitem-box">\n                                <div class="st-mitem-title-box">\n                                    <h4 class="st-mitem-title-el">\n                                        상품명 선택\n                                    </h4>\n                                </div>\n                                <div class="st-mitem-content-box">\n                                    <div>\n                                        ${t}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    `;$("#i_mitem_classify_selector_box").html(e)},clear:function(){$("#i_mitem_classify_selector_box").html("")}}},setClassifyInfo:function(){let t=`\n                <div class="st-aitem-wrapper">\n                    <div class="st-aitem-box">\n                        <div class="st-aitem-title-box">\n                            <h4 class="st-aitem-title-el">\n                                상품 정보\n                                <button type="button" class="btn btn-outline-danger btn-lg float-right" onclick="eventClassifyHandler().classifyDeleteClick('${SELECTED_CLASSIFY.classifyUuid}')">\n                                    삭제\n                                    <i class="fas fa-trash"></i>\n                                </button>\n                            </h4>\n                        </div>\n                        <div class="st-aitem-content-box">\n                            <div class="st-aitem-header-title-wrapper">\n                                <div class="row">\n                                    <div class="form-group col-sm-3">\n                                        <label for="i_mitem_info_classify_name" class="st-aitem-required-text">*상품명 (필수)</label>\n                                        <div class="input-group mb-3">\n                                            <input type="text" class="ty-st-aitem-input form-control" id="i_mitem_info_classify_name" name="i_mitem_info_classify_name" value="${SELECTED_CLASSIFY.classifyName}" disabled>\n                                            <div class="input-group-append">\n                                                <button class="btn btn-outline-secondary" type="button" id="i_mitem_info_classify_name_fix_btn" onclick="eventClassifyHandler().infoClassifyNameBtnClick().edit()"><i class="fas fa-pen"></i></button>\n                                            </div>\n                                        </div>\n                                        <div class="ty-st-aitem-box-footer">*관리하기 편하신 이름으로 설정해주세요.</div>\n                                    </div>\n                                    <div class="form-group col-sm-6">\n                                        <label for="i_mitem_info_classify_desc">상품 설명 (선택)</label>\n                                        <div class="input-group">\n                                            <input class="ty-st-aitem-input form-control" id="i_mitem_info_classify_desc" value="${SELECTED_CLASSIFY.classifyDesc}" disabled></input>\n                                            <div class="input-group-append">\n                                                <button class="btn btn-outline-secondary" type="button" id="i_mitem_info_classify_desc_fix_btn" onclick="eventClassifyHandler().infoClassifyDescBtnClick().edit()"><i class="fas fa-pen"></i></button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <p>상품 이미지(선택)</p>\n                                <div class="row">\n                                    <input type="file" name="i_mitem_image_file" id="i_mitem_image_file" onchange="eventClassifyHandler().uploadImage()" accept="image/*" hidden>\n                                    ${""==SELECTED_CLASSIFY.classifyImageUrl?'\n                                            <div class="col-auto">\n                                                <button type="button" class="st-aitem-image-btn" onclick="eventClassifyHandler().fileUploaderOpen()">\n                                                    <svg width="2.5em" height="2.5em" viewBox="0 0 17 16" class="bi bi-image"\n                                                        fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n                                                        <path fill-rule="evenodd"\n                                                            d="M14.002 2h-12a1 1 0 0 0-1 1v9l2.646-2.354a.5.5 0 0 1 .63-.062l2.66 1.773 3.71-3.71a.5.5 0 0 1 .577-.094L15.002 9.5V3a1 1 0 0 0-1-1zm-12-1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm4 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" />\n                                                    </svg>\n                                                </button>\n                                            </div>\n                                        ':`\n                                            <div class="col-auto">\n                                                <img src="${SELECTED_CLASSIFY.classifyImageUrl}" class="st-aitem-image-el"/>   \n                                            </div>\n                                            <div class="col-sm-2">\n                                                <button type="button" class="btn btn-block ty-st-aitem-btn"\n                                                    onclick="eventClassifyHandler().fileUploaderOpen()">\n                                                    이미지 수정\n                                                </button>\n                                                <button type="button" class="btn btn-block ty-st-aitem-btn"\n                                                    onclick="eventClassifyHandler().deleteImage()">\n                                                    이미지 제거\n                                                </button>\n                                            </div>\n                                        `}\n                                </div>\n                                <div class="ty-st-aitem-box-footer">\n                                    *최대 10MB까지 첨부 가능합니다.\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `;return{set:function(){return $("#i_mitem_classify_info").html(t)},clear:function(){return $("#i_mitem_classify_info").html("")}}}}}function classifyObjectControl(){return{updateSelectedClassify:function(){return SELECTED_CLASSIFY=CLASSIFYS.filter(t=>t.classifyUuid===SELECTED_CLASSIFY.classifyUuid)[0]}}}function eventClassifyHandler(){return{classifyInfoOpenClick:async function(t){loadClassifyHtml().setClassifySelect().set(),SELECTED_CLASSIFY=CLASSIFYS.filter(e=>e.classifyUuid==t)[0],loadClassifyHtml().setClassifyInfo().set(),loadCategoryHtml().setCategoyBreadcrumb().set(),await dataConnect().getOptions(),optionObjectControl().selectedOptionFlush(),loadOptionHtml().setOptionSelect().set(),loadOptionHtml().setOptionInfoHtml().clear(),loadItemHtml().setItemsTableHtml().clear(),$("#i_ty_mitem_classify_select_el_btn_"+SELECTED_CLASSIFY.classifyUuid).addClass("ty-st-sd-batch-selected-item-btn-active")},classifySelectorChange:async function(t){if("none"==t.value)return SELECTED_CLASSIFY="none",void loadClassifyHtml().setClassifyInfo().clear();SELECTED_CLASSIFY=CLASSIFYS.filter(e=>e.classifyUuid==t.value)[0],$("#i_mitem_classify_selector").val("none"),loadClassifyHtml().setClassifyInfo().set(),loadCategoryHtml().setCategoyBreadcrumb().set(),await dataConnect().getOptions(),optionObjectControl().selectedOptionFlush(),loadOptionHtml().setOptionSelect().set(),loadOptionHtml().setOptionInfoHtml().clear(),loadItemHtml().setItemsTableHtml().clear()},infoClassifyNameBtnClick:function(){let t=$("#i_mitem_info_classify_name"),e=$("#i_mitem_info_classify_name_fix_btn");return{edit:function(){t.attr("disabled",!1),e.attr("onclick","eventClassifyHandler().infoClassifyNameBtnClick().ok()"),e.html('<i class="far fa-check-square"></i>')},ok:async function(){let a=t.val();textIsEmpty(a)|null==a?alert("비어있는 상품명은 사용하실수 없습니다."):(SELECTED_CLASSIFY.classifyName=a,await dataConnect().updateClassifyData(),await dataConnect().getClassifys(),loadClassifyHtml().setClassifySelect().set(),$("#i_mitem_classify_select_el_box_"+SELECTED_CLASSIFY.classifyUuid).css("border","2px solid #f2a057"),t.attr("disabled",!0),e.attr("onclick","eventClassifyHandler().infoClassifyNameBtnClick().edit()"),e.html('<i class="fas fa-pen"></i>'))}}},infoClassifyDescBtnClick:function(){let t=$("#i_mitem_info_classify_desc"),e=$("#i_mitem_info_classify_desc_fix_btn");return{edit:function(){t.attr("disabled",!1),e.attr("onclick","eventClassifyHandler().infoClassifyDescBtnClick().ok()"),e.html('<i class="far fa-check-square"></i>')},ok:async function(){let a=t.val();SELECTED_CLASSIFY.classifyDesc=a,await dataConnect().updateClassifyData(),await dataConnect().getClassifys(),loadClassifyHtml().setClassifySelect().set(),$("#i_mitem_classify_select_el_box_"+SELECTED_CLASSIFY.classifyUuid).css("border","2px solid #f2a057"),t.attr("disabled",!0),e.attr("onclick","eventClassifyHandler().infoClassifyDescBtnClick().edit()"),e.html('<i class="fas fa-pen"></i>')}}},categoryUpdateBtnClick:async function(){$("#i_mitem_breadcrumb_list").html(""),loadCategoryHtml().setCategoryList().set(),await dataConnect().getCategorys().getCategory1(),loadCategoryHtml().setCategoryEls()},classifyDeleteClick:function(t){if(confirm("해당 상품을 삭제하게 되면 옵션 및 상세 상품 데이터들도 함께 삭제 됩니다. 계속 하시겠습니까?")){let e={};CLASSIFYS=CLASSIFYS.filter(a=>(a.classifyUuid==t&&(e=a),a.classifyUuid!=t)),loadClassifyHtml().setClassifySelect().set(),loadClassifyHtml().setClassifyInfo().clear(),loadCategoryHtml().setCategoyBreadcrumb().clear(),loadOptionHtml().setOptionSelect().clear(),loadOptionHtml().setOptionInfoHtml().clear(),loadItemHtml().setItemsTableHtml().clear(),dataConnect().deleteClassifyData(e),SELECTED_CLASSIFY={},SELECTED_OPTION={},SELECTED_ITEM={},SELECTED_CATEGORY={category1Id:0,category2Id:0,category3Id:0,category4Id:0,category1Name:"",category2Name:"",category3Name:"",category4Name:""}}},fileUploaderOpen:function(){$("#i_mitem_image_file").click()},uploadImage:async function(){await dataConnect().uploadImageToS3(),await dataConnect().updateClassifyData(),await dataConnect().getClassifys(),loadClassifyHtml().setClassifySelect().set(),$("#i_mitem_classify_select_el_box_"+SELECTED_CLASSIFY.classifyUuid).css("border","2px solid #f2a057"),loadClassifyHtml().setClassifyInfo().set()},deleteImage:async function(){SELECTED_CLASSIFY.classifyImageUrl="",await dataConnect().updateClassifyData(),await dataConnect().getClassifys(),loadClassifyHtml().setClassifySelect().set(),$("#i_mitem_classify_select_el_box_"+SELECTED_CLASSIFY.classifyUuid).css("border","2px solid #f2a057"),loadClassifyHtml().setClassifyInfo().set()}}}function dataConnect(){return{getStores:async function(){await $.ajax({url:"/api/item_store/get/all",type:"GET",contentType:"application/json",dataType:"json",beforeSend:function(){$("#i_mitem_loading").removeClass("display-none")},complete:function(){$("#i_mitem_loading").addClass("display-none")},success:function(t){STORES=t},error:function(t){console.log(t)}})},getClassifys:async function(){await $.ajax({url:"/api/item_manager/search/classifys/def/byuser",type:"GET",contentType:"application/json",dataType:"json",beforeSend:function(){$("#i_mitem_loading").removeClass("display-none")},complete:function(){$("#i_mitem_loading").addClass("display-none")},success:function(t){return"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):"SUCCESS"===t.message?void(CLASSIFYS=t.classifys):"FAILURE"===t.message?(alert("DB Search error code : MIGCLF500"),window.location.reload()):(alert("undefined error code : MIGCLF"),window.location.reload())},error:function(t){return 403===t.status?(alert("세션이 만료되었습니다."),window.location.reload()):(alert("undefined error code : MIGCLF"),window.location.reload())}})},updateClassifyData:async function(){let t=JSON.stringify(SELECTED_CLASSIFY);await $.ajax({url:"/api/item_manager/update/classify/pure",type:"POST",contentType:"application/json",dataType:"json",data:t,beforeSend:function(t){t.setRequestHeader("X-XSRF-TOKEN",$("#i_mitem_csrf").val()),$("#i_mitem_loading").removeClass("display-none")},complete:function(){$("#i_mitem_loading").addClass("display-none")},success:async function(t){return"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):"SUCCESS"===t.message?void 0:"FAILURE"===t.message?(alert("DB Search error code : MIUCLF500"),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())},error:function(t){return 403===t.status?(alert("세션이 만료되었습니다."),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())}})},deleteClassifyData:function(t){let e=JSON.stringify(t);$.ajax({url:"/api/item_manager/delete/classify/one",type:"POST",contentType:"application/json",dataType:"json",data:e,beforeSend:function(t){t.setRequestHeader("X-XSRF-TOKEN",$("#i_mitem_csrf").val()),$("#i_mitem_loading").removeClass("display-none")},complete:function(){$("#i_mitem_loading").addClass("display-none")},success:async function(t){return"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):"SUCCESS"===t.message?(await dataConnect().getClassifys(),void loadClassifyHtml().setClassifySelect().set()):"FAILURE"===t.message?(alert("DB Search error code : MIUCLF500"),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())},error:function(t){return 403===t.status?(alert("세션이 만료되었습니다."),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())}})},getCategorys:function(){return{getCategory1:async function(){await $.ajax({url:"/api/item_manger/category/get_category1/all",type:"GET",contentType:"application/json",dataType:"json",success:function(t){CATEGORY1=t},error:function(t){console.log(t)}})},getCategory2:async function(){await $.ajax({url:"/api/item_manger/category/get_category2/val",type:"GET",contentType:"application/json",dataType:"json",data:{ic1:SELECTED_CATEGORY.category1Id},success:function(t){CATEGORY2=t},error:function(t){console.log(t)}})},getCategory3:async function(){await $.ajax({url:"/api/item_manger/category/get_category3/val",type:"GET",contentType:"application/json",dataType:"json",data:{ic1:SELECTED_CATEGORY.category1Id,ic2:SELECTED_CATEGORY.category2Id},success:function(t){CATEGORY3=t},error:function(t){console.log(t)}})},getCategory4:async function(){await $.ajax({url:"/api/item_manger/category/get_category4/val",type:"GET",contentType:"application/json",dataType:"json",data:{ic1:SELECTED_CATEGORY.category1Id,ic2:SELECTED_CATEGORY.category2Id,ic3:SELECTED_CATEGORY.category3Id},success:function(t){CATEGORY4=t},error:function(t){console.log(t)}})}}},updateCategoryData:async function(){let t=JSON.stringify({category:SELECTED_CATEGORY,classify:SELECTED_CLASSIFY});await $.ajax({url:"/api/item_manager/update/categorygroup/def",type:"POST",contentType:"application/json",dataType:"json",data:t,beforeSend:function(t){t.setRequestHeader("X-XSRF-TOKEN",$("#i_mitem_csrf").val()),$("#i_mitem_loading").removeClass("display-none")},complete:function(){$("#i_mitem_loading").addClass("display-none")},success:function(t){return"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):"SUCCESS"===t.message?void 0:"FAILURE"===t.message?(alert("DB Search error code : MIUCLF500"),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())},error:function(t){return 403===t.status?(alert("세션이 만료되었습니다."),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())}})},getOptions:async function(){await $.ajax({url:"/api/item_manager/search/options/byclassify",type:"GET",contentType:"application/json",dataType:"json",data:{classifyUuid:SELECTED_CLASSIFY.classifyUuid},beforeSend:function(t){$("#i_mitem_loading").removeClass("display-none")},complete:function(){$("#i_mitem_loading").addClass("display-none")},success:function(t){return"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):"SUCCESS"!==t.message?"FAILURE"===t.message?(alert("DB Search error code : MDGOPT500"),window.location.reload()):(alert("undefined error code : MDGOPT"),window.location.reload()):void(OPTIONS=t.options)},error:function(t){return 403===t.status?(alert("세션이 만료되었습니다."),window.location.reload()):(alert("undefined error code : MDGOPT"),window.location.reload())}})},addOption:async function(t){let e=JSON.stringify({classify:SELECTED_CLASSIFY,optionName:t,remainingCount:0});await $.ajax({url:"/api/item_manager/add/option/one",type:"POST",contentType:"application/json",dataType:"json",data:e,beforeSend:function(t){t.setRequestHeader("X-XSRF-TOKEN",$("#i_mitem_csrf").val()),$("#i_mitem_loading").removeClass("display-none")},complete:function(){$("#i_mitem_loading").addClass("display-none")},success:function(t){return"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):"SUCCESS"!==t.message?"FAILURE"===t.message?(alert("DB Search error code : MDGOPT500"),window.location.reload()):(alert("undefined error code : MDGOPT"),window.location.reload()):void 0},error:function(t){return 403===t.status?(alert("세션이 만료되었습니다."),window.location.reload()):(alert("undefined error code : MDGOPT"),window.location.reload())}})},updateOptionData:async function(){let t=JSON.stringify(SELECTED_OPTION);await $.ajax({url:"/api/item_manager/update/option/pure",type:"POST",contentType:"application/json",dataType:"json",data:t,beforeSend:function(t){t.setRequestHeader("X-XSRF-TOKEN",$("#i_mitem_csrf").val()),$("#i_mitem_loading").removeClass("display-none")},complete:function(){$("#i_mitem_loading").addClass("display-none")},success:async function(t){return"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):"SUCCESS"===t.message?void 0:"FAILURE"===t.message?(alert("DB Search error code : MIUCLF500"),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())},error:function(t){return 403===t.status?(alert("세션이 만료되었습니다."),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())}})},deleteOptionData:function(t){let e=JSON.stringify(t);$.ajax({url:"/api/item_manager/delete/option/one",type:"POST",contentType:"application/json",dataType:"json",data:e,beforeSend:function(t){t.setRequestHeader("X-XSRF-TOKEN",$("#i_mitem_csrf").val())},success:async function(t){return"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):"SUCCESS"===t.message?(await dataConnect().getOptions(),void loadOptionHtml().setOptionSelect().set()):"FAILURE"===t.message?(alert("DB Search error code : MIUCLF500"),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())},error:function(t){return 403===t.status?(alert("세션이 만료되었습니다."),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())}})},getItems:async function(){await $.ajax({url:"/api/item_manager/search/item/partial/byoption",type:"GET",contentType:"application/json",dataType:"json",data:{optionUuid:SELECTED_OPTION.optionUuid},beforeSend:function(t){$("#i_mitem_loading").removeClass("display-none")},complete:function(){$("#i_mitem_loading").addClass("display-none")},success:function(t){return"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):"SUCCESS"!==t.message?"FAILURE"===t.message?(alert("DB Search error code : MDGOPT500"),window.location.reload()):(alert("undefined error code : MDGOPT"),window.location.reload()):void(ITEMS=t.data)},error:function(t){return 403===t.status?(alert("세션이 만료되었습니다."),window.location.reload()):(alert("undefined error code : MDGOPT"),window.location.reload())}})},updateItemData:function(t){let e=ITEMS.filter(e=>e.itemId==t)[0],a=JSON.stringify(e);$.ajax({url:"/api/item_manager/update/item/def",type:"POST",contentType:"application/json",dataType:"json",data:a,beforeSend:function(t){t.setRequestHeader("X-XSRF-TOKEN",$("#i_mitem_csrf").val()),$("#i_mitem_loading").removeClass("display-none")},complete:function(){$("#i_mitem_loading").addClass("display-none")},success:async function(t){return"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):"SUCCESS"===t.message?void await dataConnect().getItems():"FAILURE"===t.message?(alert("DB Search error code : MIUCLF500"),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())},error:function(t){return 403===t.status?(alert("세션이 만료되었습니다."),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())}})},deleteItemData:function(t){let e=JSON.stringify(t);$.ajax({url:"/api/item_manager/delete/item/one",type:"POST",contentType:"application/json",dataType:"json",data:e,beforeSend:function(t){t.setRequestHeader("X-XSRF-TOKEN",$("#i_mitem_csrf").val())},success:async function(t){return"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):"SUCCESS"===t.message?void 0:"FAILURE"===t.message?(alert("DB Search error code : MIUCLF500"),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())},error:function(t){return 403===t.status?(alert("세션이 만료되었습니다."),window.location.reload()):(alert("undefined error code : MIUCLF"),window.location.reload())}})},addItemWithStore:async function(t,e){let a=SELECTED_CLASSIFY,n=SELECTED_OPTION,i=JSON.stringify({classify:a,option:n,storeType:t,storeName:e});await $.ajax({url:"/api/item_manager/add/item/one",type:"POST",contentType:"application/json",dataType:"json",data:i,beforeSend:function(t){t.setRequestHeader("X-XSRF-TOKEN",$("#i_mitem_csrf").val()),$("#i_mitem_loading").removeClass("display-none")},complete:function(){$("#i_mitem_loading").addClass("display-none")},success:async function(t){return"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):"SUCCESS"===t.message?(await dataConnect().getItems(),void loadItemHtml().setItemsTableHtml().set()):"FAILURE"===t.message?(alert("DB Search error code : MDGOPT500"),window.location.reload()):(alert("undefined error code : MDGOPT"),window.location.reload())},error:function(t){return 403===t.status?(alert("세션이 만료되었습니다."),window.location.reload()):(alert("undefined error code : MDGOPT"),window.location.reload())}})},uploadImageToS3:async function(){var t=$("#i_mitem_image_file").get()[0].files[0],e=new FormData;e.append("file",t),await $.ajax({url:"/api/fileupload/image",type:"POST",enctype:"multipart/form-data",contentType:!1,processData:!1,dataType:"json",data:e,beforeSend:function(t){t.setRequestHeader("X-XSRF-TOKEN",$("#i_mitem_csrf").val()),$("#i_mitem_loading").removeClass("display-none")},complete:function(){$("#i_mitem_loading").addClass("display-none")},success:async function(t){"SUCCESS"===t.message?SELECTED_CLASSIFY.classifyImageUrl=t.imageUrl:alert("image undefined")},error:function(t){alert("image upload error")}}),$("#i_mitem_image_file").val("")}}}function loadItemHtml(){return{setItemsTableHtml:function(){return{set:function(){let t="";ITEMS.forEach((e,a)=>{let n=`\n                            <div class="form-group">\n                                ${e.commitionCost}\n                            </div>\n                        `,i=`\n                            <div class="form-group">\n                                ${e.price}\n                            </div>\n                        `,o=`\n                            <div class="form-group">\n                                ${e.customerTransCost}\n                            </div>\n                        `,s=`\n                            <div class="form-group">\n                                ${e.sellerRealTransCost}\n                            </div>\n                        `,l=`\n                            <div class="form-group">\n                                ${e.purchaseCost}\n                            </div>\n                        `,c=`\n                            <div class="form-group">\n                                ${e.purchaseTransCost}\n                            </div>\n                        `,r=`\n                            <div class="form-group">\n                                ${e.extraCharge}\n                            </div>\n                        `;t+=`\n                            <tr>\n                                <th scope="row">${a+1}</th>\n                                <td>\n                                    <button type="button" class="btn btn-outline-danger" onclick="eventItemHandler().itemDataDeleteClick('${e.itemId}')">삭제</button>\n                                    <button type="button" class="btn btn-outline-primary" onclick="eventItemHandler().itemDataUpdateModalOpen('${e.itemId}')">데이터 수정</button>\n                                </td>\n                                <td>${e.storeName}</td>\n                                <td>${n}</td>\n                                <td>${numberWithCommas(i)}</td>\n                                <td>${numberWithCommas(o)}</td>\n                                <td>${numberWithCommas(s)}</td>\n                                <td>${numberWithCommas(l)}</td>\n                                <td>${numberWithCommas(c)}</td>\n                                <td>${numberWithCommas(r)}</td>\n                            </tr>\n                        `});let e=`\n                        <div class="st-sd-wrapper">\n                            <div class="st-sd-box">\n                                <div class="st-sd-title-box">\n                                    <h4 class="st-sd-title-el">\n                                        상품 상세<button class="float-right btn btn-outline-primary btn-lg" onclick="eventItemHandler().storeAddModalOpen()">스토어 추가</button>\n                                    </h4>\n                                </div>\n                                <div class="st-sd-table-container">\n                                    <div class="table-responsive list-table-box text-center" id="i_sell_item_list">\n                                        <table class="table overflow-table">\n                                            <thead class="thead-dark">\n                                            <tr>\n                                                <th scope="col" width="50">#</th>\n                                                <th scope="col" width="200">컨트롤러</th>\n                                                <th scope="col" width="200">마켓 종류</th>\n                                                <th scope="col" width="200">마켓 수수료<div class="st-sd-sell-unit">단위 : [%]</div></th>\n                                                <th scope="col" width="200">개당 판매가<span class="text-success">(+)</span><div class="st-sd-sell-unit">단위 : [원]</div></th>\n                                                <th scope="col" width="200">개당 소비자 운임비용<span class="text-success">(+)</span><div class="st-sd-sell-unit">단위 : [원]</div></th>\n                                                <th scope="col" width="200">개당 판매자 실질 운임비용<span class="text-danger">(-)</span><div class="st-sd-sell-unit">단위 : [원]</div></th>\n                                                <th scope="col" width="200">개당 매입 가격 | 구매 비용<span class="text-danger">(-)</span><div class="st-sd-sell-unit">단위 : [원]</div></th>\n                                                <th scope="col" width="200">개당 매입 운임 비용<span class="text-danger">(-)</span><div class="st-sd-sell-unit">단위 : [원]</div></th>\n                                                <th scope="col" width="200">개당 기타 비용<span class="text-danger">(-)</span><div class="st-sd-sell-unit">단위 : [원]</div></th>\n                                            </tr>\n                                            </thead>\n                                            <tbody>\n                                                ${t}\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    `;$("#i_mitem_item_table_box").html(e)},clear:function(){$("#i_mitem_item_table_box").html("")}}},setItemDataUpdateModalContent:function(){return{set:function(){let t=`\n                        <div class="modal-content">\n                            ${`\n                        <div class="modal-header">\n                            <h5 class="modal-title" id="i_mitem_batch_input_modalLabel">마켓명 : (${ITEM_MODAL_DATA.storeName})</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                    `}\n                            ${`\n                        <div class="modal-body">\n                            <div class="form-row">\n                                <div class="form-group col-md-6">\n                                    <label for="i_mitem_batch_input_commition_cost">마켓 수수료 [%]</label>\n                                    <span class="float-right" style="color:gray;">&middot;&middot;&middot;&middot;&middot;&middot;[1]</span>\n                                    <input type="text" class="form-control" id="i_mitem_batch_input_commition_cost"\n                                        value=${ITEM_MODAL_DATA.commitionCost} placeholder="마켓 수수료" onkeypress="return isActualNumberKey(event)"\n                                        onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');">\n\n                                    <label for="i_mitem_batch_input_price">개당 판매가 [원]<span class="text-success">(+)</span></label>\n                                    <span class="float-right" style="color:gray;">&middot;&middot;&middot;&middot;&middot;&middot;[2]</span>\n                                    <input type="text" class="form-control" id="i_mitem_batch_input_price" \n                                        value=${ITEM_MODAL_DATA.price}\n                                        placeholder="개당 판매가" onkeypress="return isNumberKey(event)"\n                                        onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');">\n\n                                    <label for="i_mitem_batch_input_customer_trans_cost">개당 소비자 운임 비용 [원]<span class="text-success">(+)</span></label>\n                                    <span class="badge badge-dark" title="${TOOLTIP_TEXT.unitCustomerTransCost}">&#63;</span>\n                                    <span class="float-right" style="color:gray;">&middot;&middot;&middot;&middot;&middot;&middot;[3]</span>\n                                    <input type="text" class="form-control" id="i_mitem_batch_input_customer_trans_cost"\n                                        value=${ITEM_MODAL_DATA.customerTransCost} placeholder="개당 소비자 운임 비용" onkeypress="return isNumberKey(event)"\n                                        onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');">\n                                    <label for="i_mitem_batch_input_seller_real_trans_cost">개당 판매자 실질 운임 비용 [원]<span class="text-danger">(-)</span></label>\n                                    <span class="badge badge-dark" title="${TOOLTIP_TEXT.unitSellerRealTransCost}">&#63;</span>\n                                    <span class="float-right" style="color:gray;">&middot;&middot;&middot;&middot;&middot;&middot;[4]</span>\n                                    <input type="text" class="form-control"\n                                        id="i_mitem_batch_input_seller_real_trans_cost" value=${ITEM_MODAL_DATA.sellerRealTransCost}\n                                        placeholder="개당 판매자 실질 운임 비용" onkeypress="return isNumberKey(event)"\n                                        onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');">\n                                </div>\n                                <div class="form-group col-md-6">\n                                    <label for="i_mitem_batch_input_purchase_cost">개당 매입 가격 | 구매 비용 [원]<span class="text-danger">(-)</span></label>\n                                    <span class="float-right" style="color:gray;">&middot;&middot;&middot;&middot;&middot;&middot;[5]</span>\n                                    <input type="text" class="form-control" id="i_mitem_batch_input_purchase_cost"\n                                        value=${ITEM_MODAL_DATA.purchaseCost} placeholder="개당 매입 가격 | 구매 비용" onkeypress="return isNumberKey(event)"\n                                        onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');">\n\n                                    <label for="i_mitem_batch_input_purchase_trans_cost">개당 매입 운임 비용 [원]<span class="text-danger">(-)</span></label>\n                                    <span class="float-right" style="color:gray;">&middot;&middot;&middot;&middot;&middot;&middot;[6]</span>\n                                    <input type="text" class="form-control" id="i_mitem_batch_input_purchase_trans_cost"\n                                        value=${ITEM_MODAL_DATA.purchaseTransCost} placeholder="개당 매입 운임 비용" onkeypress="return isNumberKey(event)"\n                                        onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');">\n\n                                    <label for="i_mitem_batch_input_extra_charge">개당 기타 비용 [원]<span class="text-danger">(-)</span></label>\n                                    <span class="float-right" style="color:gray;">&middot;&middot;&middot;&middot;&middot;&middot;[7]</span>\n                                    <input type="text" class="form-control" id="i_mitem_batch_input_extra_charge"\n                                        value=${ITEM_MODAL_DATA.extraCharge} placeholder="개당 기타 비용" onkeypress="return isNumberKey(event)"\n                                        onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');">\n                                </div>\n                                <div class="form-group col-md-12">\n                                    <div id="i_mitem_batch_data_profit">\n                                        개당 수익 : <span>${numberWithCommas(ITEM_MODAL_DATA.unitProfit)}</span> [원]\n                                        <span class="badge badge-dark" title="${TOOLTIP_TEXT.unitProfit}">&#63;</span>\n                                        <span style="color:gray;">&middot;&middot;&middot;&middot;&middot;&middot;[b]</span>\n                                    </div>\n                                    <div id="i_mitem_batch_data_profit_rate">\n                                        개당 수익율 : <span>${ITEM_MODAL_DATA.unitProfitRate}</span> [%]\n                                        <span class="badge badge-dark" title="${TOOLTIP_TEXT.unitProfitRate}">&#63;</span>\n                                        <span style="color:gray;">&middot;&middot;&middot;&middot;&middot;&middot;[c]</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    `}\n                            \n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-primary" onclick="eventItemHandler().modalDataAdapt().setUnitData()">수치 적용</button>\n                            <button type="button" class="btn btn-primary" onclick="eventItemHandler().modalDataSubmitClick()">저장하기</button>\n                            <button type="button" class="btn btn-primary" onclick="eventItemHandler().modalClose()">닫기</button>\n                        </div>\n                    \n                        </div>\n                    `;$("#i_mitem_modal_large_box").html(t)}}},setAddStoreModalContent:function(){let t="";STORES.forEach(e=>{t+=`\n                    <span class="st-sd-batch-selected-item-wrapper">\n                        <button class="btn" onclick="eventItemHandler().addItemWithStore('${e.storeType}', '${e.storeName}')">${e.storeName}</button>\n                    </span>\n                `});let e=`\n                <div class="modal-content">\n                    \n                        <div class="modal-header">\n                            <h5 class="modal-title" id="i_mitem_batch_input_modalLabel">스토어 추가하기</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                    \n                    ${`\n                <div class="modal-body">\n                    ${t}\n                </div>\n            `}\n                    \n                <div class="modal-footer">\n                    <button type="button" class="btn btn-primary" onclick="eventItemHandler().modalClose()">닫기</button>\n                </div>\n            \n                </div>\n            `;$("#i_mitem_modal_large_box").html(e)}}}function itemObjectDataControl(){return{costValCalc:function(t){let e=Number(t.price)+Number(t.customerTransCost),a=parseInt(e*((100-Number(t.commitionCost))/100)-Number(t.purchaseCost)-Number(t.purchaseTransCost)-Number(t.sellerRealTransCost)-Number(t.extraCharge)),n=0;return n=0===e?0:(a/e*100).toFixed(2),{getUnitSales:function(){return e},getUnitProfit:function(){return a},getUnitProfitRate:function(){return n}}},setItemModalData:function(t){let e=ITEMS.filter(e=>e.itemId==t)[0];ITEM_MODAL_DATA="";let a=itemObjectDataControl().costValCalc(e);ITEM_MODAL_DATA={itemId:e.itemId,storeName:e.storeName,itemName:e.itemName,commitionCost:e.commitionCost,price:e.price,customerTransCost:e.customerTransCost,sellerRealTransCost:e.sellerRealTransCost,purchaseCost:e.purchaseCost,purchaseTransCost:e.purchaseTransCost,extraCharge:e.extraCharge,unitProfit:a.getUnitProfit(),unitProfitRate:a.getUnitProfitRate()}}}}function eventItemHandler(){return{itemDataUpdateModalOpen:function(t){itemObjectDataControl().setItemModalData(t),loadItemHtml().setItemDataUpdateModalContent().set(),$("#i_mitem_modal_large").modal("show")},modalClose:function(){ITEM_MODAL_DATA="",$("#i_mitem_modal_large").modal("hide")},modalDataAdapt:function(){return{setUnitData:function(){ITEM_MODAL_DATA.commitionCost=""===$("#i_mitem_batch_input_commition_cost").val()?0:$("#i_mitem_batch_input_commition_cost").val(),ITEM_MODAL_DATA.price=""===$("#i_mitem_batch_input_price").val()?0:$("#i_mitem_batch_input_price").val(),ITEM_MODAL_DATA.customerTransCost=""===$("#i_mitem_batch_input_customer_trans_cost").val()?0:$("#i_mitem_batch_input_customer_trans_cost").val(),ITEM_MODAL_DATA.sellerRealTransCost=""===$("#i_mitem_batch_input_seller_real_trans_cost").val()?0:$("#i_mitem_batch_input_seller_real_trans_cost").val(),ITEM_MODAL_DATA.purchaseCost=""===$("#i_mitem_batch_input_purchase_cost").val()?0:$("#i_mitem_batch_input_purchase_cost").val(),ITEM_MODAL_DATA.purchaseTransCost=""===$("#i_mitem_batch_input_purchase_trans_cost").val()?0:$("#i_mitem_batch_input_purchase_trans_cost").val(),ITEM_MODAL_DATA.extraCharge=""===$("#i_mitem_batch_input_extra_charge").val()?0:$("#i_mitem_batch_input_extra_charge").val();let t=itemObjectDataControl().costValCalc(ITEM_MODAL_DATA);ITEM_MODAL_DATA.unitProfit=t.getUnitProfit(),ITEM_MODAL_DATA.unitProfitRate=t.getUnitProfitRate(),loadItemHtml().setItemDataUpdateModalContent().set()}}},modalDataSubmitClick:function(){ITEMS.forEach(t=>{if(t.itemId==ITEM_MODAL_DATA.itemId)return t.commitionCost=""===$("#i_mitem_batch_input_commition_cost").val()?0:$("#i_mitem_batch_input_commition_cost").val(),t.price=""===$("#i_mitem_batch_input_price").val()?0:$("#i_mitem_batch_input_price").val(),t.customerTransCost=""===$("#i_mitem_batch_input_customer_trans_cost").val()?0:$("#i_mitem_batch_input_customer_trans_cost").val(),t.sellerRealTransCost=""===$("#i_mitem_batch_input_seller_real_trans_cost").val()?0:$("#i_mitem_batch_input_seller_real_trans_cost").val(),t.purchaseCost=""===$("#i_mitem_batch_input_purchase_cost").val()?0:$("#i_mitem_batch_input_purchase_cost").val(),t.purchaseTransCost=""===$("#i_mitem_batch_input_purchase_trans_cost").val()?0:$("#i_mitem_batch_input_purchase_trans_cost").val(),t.extraCharge=""===$("#i_mitem_batch_input_extra_charge").val()?0:$("#i_mitem_batch_input_extra_charge").val(),$("#i_mitem_modal_large").modal("hide"),loadItemHtml().setItemsTableHtml().set(),dataConnect().updateItemData(t.itemId)})},itemDataDeleteClick:function(t){let e=ITEMS.filter(e=>e.itemId==t)[0];ITEMS=ITEMS.filter(e=>e.itemId!=t),dataConnect().deleteItemData(e),loadItemHtml().setItemsTableHtml().set()},storeAddModalOpen:function(){$("#i_mitem_modal_large").modal("show"),loadItemHtml().setAddStoreModalContent()},addItemWithStore:async function(t,e){dataConnect().addItemWithStore(t,e),$("#i_mitem_modal_large").modal("hide")}}}async function init(){regManageItemObjectInitialize(),await loadManageItemInitializeData(),loadManageItemInitializeHtml()}async function loadManageItemInitializeData(){await dataConnect().getClassifys(),await dataConnect().getStores()}function loadManageItemInitializeHtml(){loadClassifyHtml().setClassifySelect().set()}function regManageItemObjectInitialize(){manageItemObjectInit()}function manageItemObjectInit(){CLASSIFYS=[],OPTIONS=[],ITEMS=[],STORES=[],CATEGORY1=[],CATEGORY2=[],CATEGORY3=[],CATEGORY4=[],SELECTED_CLASSIFY={},SELECTED_OPTION={},SELECTED_ITEM={},SELECTED_CATEGORY={category1Id:0,category2Id:0,category3Id:0,category4Id:0,category1Name:"",category2Name:"",category3Name:"",category4Name:""},ITEM_MODAL_DATA="",TOOLTIP_TEXT={unitCustomerTransCost:"소비자 부담 운임비란?</br>소비자(구매자) -> 판매자(나) [지불하는 금액]",unitSellerRealTransCost:"판매자 실질 부담 운임비란?</br>판매자(나) -> 배송업체 [지불하는 금액]",unitProfit:"개당 매출 [a] = </br>[2] + [3]<hr/>개당 순수익 [b] = </br>[a] * (100-[1])% - [4] - [5] - [6] - [7]",unitProfitRate:"개당 수익율 [c] = </br>( ( [b] / [a] ) * 100 )%",totAdsCost:"해당 판매 등록 상품에 대한 총 집행 광고 또는 마케팅 비용입니다.",totExpensesCost:"해당 판매 등록 상품에 대한 총 추가 지출입니다.",totEarningCost:"해당 판매 등록 상품에 대한 총 추가 수익입니다.",totPurchaseTransCost:"해당 판매 등록 상품에 대한 총 매입 운임 비용입니다. <b>개당 매입 운임 비용과 대조되는 항목이며</b>, 총 매입 운임비용 등록 시 <b>개당 매입 운임비용</b>을 한 번 더 확인해 주세요.",totCustomerTransCost:"해당 판매 등록 상품에 대한 총 소비자 부담 운임 비용입니다. <b>개당 소비자 부담 운임 비용과 대조되는 항목이며</b>, 총 소비자 부담 운임비용 등록 시 <b>개당 소비자 부담 운임비용</b>을 한 번 더 확인해 주세요.<hr/>소비자 부담 운임비란?</br>소비자(구매자) -> 판매자(나) [지불하는 금액]",totSellerRealTransCost:"해당 판매 등록 상품에 대한 총 판매자 실질 부담 운임 비용입니다. <b>개당 판매자 실질 부담 운임 비용과 대조되는 항목이며</b>, 총 판매자 실질 부담 운임비용 등록 시 <b>개당 판매자 실질 부담 운임비용</b>을 한 번 더 확인해 주세요.<hr/>판매자 실질 부담 운임비란?</br>판매자(나) -> 배송업체 [지불하는 금액]",totSales:"매출 합계 [d] = </br>[a] * [8]",totProfit:"순수익 합계 [e] = </br>[b] * [8] + [13] * (100-[1])% + [11] - [9] - [10] - [12] - [14]"}}function loadOptionHtml(){return{setOptionSelect:function(){return{set:function(){let t="";OPTIONS.forEach(e=>{t+=`\n                            <span id="i_mitem_option_select_el_box_${e.optionUuid}">\n                                <button class="btn ty-st-mItem-item-btn" id="i_ty_mitem_option_select_el_btn_${e.optionUuid}"onclick="eventOptionHandler().optionInfoOpenClick('${e.optionUuid}')">${e.optionName}</button>\n                            </span>\n                        `});let e=`\n                        <div class="st-mitem-wrapper">\n                            <div class="st-mitem-box">\n                                <div class="st-mitem-title-box">\n                                    <h4 class="st-mitem-title-el">\n                                        옵션 선택<button class="float-right btn btn-outline-primary btn-lg" onclick="eventOptionHandler().addOptionModalOpen()">옵션 추가</button>\n                                    </h4>\n                                </div>\n                                <div class="st-mitem-content-box">\n                                    <div>\n                                        ${t}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    `;$("#i_mitem_option_selector_box").html(e)},clear:function(){$("#i_mitem_option_selector_box").html("")}}},setAddOptionModalContent:function(){return{set:function(){$("#i_mitem_modal_regular_box").html('\n                        <div class="modal-content">\n                            \n                        <div class="modal-header">\n                            <h5 class="modal-title">옵션 추가</h5>\n                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                <span aria-hidden="true">&times;</span>\n                            </button>\n                        </div>\n                    \n                            \n                        <div class="modal-body">\n                            <div class="form-group">\n                                <label for="i_mitem_add_option_name_input">옵션명</label>\n                                <input type="text" class="form-control" name="i_mitem_add_option_name_input" id="i_mitem_add_option_name_input">\n                            </div>\n                        </div>\n                    \n                            \n                        <div class="modal-footer">\n                            <button type="button" class="btn btn-primary" onclick="eventOptionHandler().addOptionSubmitClick()">추가</button>\n                            <button type="button" class="btn btn-primary" onclick="eventOptionHandler().modalClose()">닫기</button>\n                        </div>\n                    \n                        </div>\n                    ')},clear:function(){$("#i_mitem_modal_regular_box").html("")}}},setOptionInfoHtml:function(){return{set:function(){let t=`\n                        <div class="st-mitem-wrapper">\n                            <div class="st-mitem-box">\n                                <div class="st-mitem-title-box">\n                                    <h4 class="st-mitem-title-el">\n                                        옵션 정보\n                                        <button type="button" class="btn btn-outline-danger btn-lg float-right" onclick="eventOptionHandler().optionDeleteClick('${SELECTED_OPTION.optionUuid}')">\n                                            옵션 삭제\n                                            <i class="fas fa-trash"></i>\n                                        </button>\n                                    </h4>\n                                </div>\n                                <div class="st-mitem-content-box">\n                                    <div class="row">\n                                        <div class="col-sm-6">\n                                            <label for="i_mitem_info_classify_name" class="st-aitem-required-text">*옵션명 (필수)</label>\n                                            <div class="input-group mb-3">\n                                                <input type="text" class="ty-st-aitem-input form-control" id="i_mitem_info_option_name" name="i_mitem_info_option_name" value="${SELECTED_OPTION.optionName}" disabled>\n                                                <div class="input-group-append">\n                                                    <button class="btn btn-outline-secondary" type="button" id="i_mitem_info_option_name_fix_btn" onclick="eventOptionHandler().infoOptionNameBtnClick().edit()"><i class="fas fa-pen"></i></button>\n                                                </div>\n                                            </div>\n                                            <div class="ty-st-aitem-box-footer">*관리하기 편하신 이름으로 설정해주세요.</div>\n                                        </div>\n                                        <div class="col-sm-6">\n                                            <label for="i_mitem_info_classify_name">재고수량 (선택)</label>\n                                                <div class="input-group mb-3">\n                                                    <input type="number" class="ty-st-aitem-input form-control" id="i_mitem_info_option_remaining" name="i_mitem_info_option_remaining" value="${SELECTED_OPTION.optionRemainingCount}" disabled>\n                                                    <div class="input-group-append">\n                                                        <button class="btn btn-outline-secondary" type="button" id="i_mitem_info_option_remaining_fix_btn" onclick="eventOptionHandler().infoOptionRemainingBtnClick().edit()"><i class="fas fa-pen"></i></button>\n                                                    </div>\n                                                </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    `;$("#i_mitem_option_info_box").html(t)},clear:function(){$("#i_mitem_option_info_box").html("")}}}}}function optionObjectControl(){return{selectedOptionFlush:function(){SELECTED_OPTION={}}}}function eventOptionHandler(){return{addOptionModalOpen:function(){loadOptionHtml().setAddOptionModalContent().set(),$("#i_mitem_modal_regular").modal("show")},modalClose:function(){$("#i_mitem_modal_regular").modal("hide"),$("#i_mitem_add_option_name_input").val("")},addOptionSubmitClick:async function(){let t=$("#i_mitem_add_option_name_input").val();""==t|null==t?alert("추가하실 옵션명을 입력해 주세요."):(await dataConnect().addOption(t),await dataConnect().getOptions(),loadOptionHtml().setOptionSelect().set(),$("#i_mitem_modal_regular").modal("hide"),$("#i_mitem_add_option_name_input").val(""))},optionInfoOpenClick:async function(t){loadOptionHtml().setOptionSelect().set(),SELECTED_OPTION=OPTIONS.filter(e=>e.optionUuid==t)[0],loadOptionHtml().setOptionInfoHtml().set(),await dataConnect().getItems(),loadItemHtml().setItemsTableHtml().set()},infoOptionNameBtnClick:function(){let t=$("#i_mitem_info_option_name"),e=$("#i_mitem_info_option_name_fix_btn");return{edit:function(){t.attr("disabled",!1),e.attr("onclick","eventOptionHandler().infoOptionNameBtnClick().ok()"),e.html('<i class="far fa-check-square"></i>')},ok:async function(){let a=t.val();textIsEmpty(a)|null==a?alert("비어있는 옵션명은 사용하실수 없습니다."):(SELECTED_OPTION.optionName=a,await dataConnect().updateOptionData(),await dataConnect().getOptions(),loadOptionHtml().setOptionSelect().set(),t.attr("disabled",!0),e.attr("onclick","eventOptionHandler().infoOptionNameBtnClick().edit()"),e.html('<i class="fas fa-pen"></i>'))}}},infoOptionRemainingBtnClick:function(){let t=$("#i_mitem_info_option_remaining"),e=$("#i_mitem_info_option_remaining_fix_btn");return{edit:function(){t.attr("disabled",!1),e.attr("onclick","eventOptionHandler().infoOptionRemainingBtnClick().ok()"),e.html('<i class="far fa-check-square"></i>')},ok:async function(){let a=t.val();isInt(a)?(SELECTED_OPTION.optionRemainingCount=a,await dataConnect().updateOptionData(),await dataConnect().getOptions(),loadOptionHtml().setOptionSelect().set(),t.attr("disabled",!0),e.attr("onclick","eventOptionHandler().infoOptionRemainingBtnClick().edit()"),e.html('<i class="fas fa-pen"></i>')):alert("재고수량은 정수만 입력 가능합니다.")}}},optionDeleteClick:function(t){if(confirm("해당 옵션을 삭제하게 되면 상세 상품 데이터들도 함께 삭제 됩니다. 계속 하시겠습니까?")){let e={};OPTIONS=OPTIONS.filter(a=>(a.optionUuid==t&&(e=a),a.optionUuid!=t)),loadOptionHtml().setOptionSelect().set(),loadOptionHtml().setOptionInfoHtml().clear(),loadItemHtml().setItemsTableHtml().clear(),dataConnect().deleteOptionData(e),SELECTED_OPTION={},SELECTED_ITEM={}}}}}init();
function loadCategoryHtml(){let t="";return{getCategory1:function(){CATEGORY1.forEach(e=>{t+=`\n                    <button type="button" id="category1Btn_${e.id}" class="btn btn-lg btn-block" onclick="categoryClickHandler().category1('${e.id}','${e.name}')">${e.name}</button>\n                `}),$("#i_category1_list").html(t)},getCategory2:function(){CATEGORY2.forEach(e=>{t+=`\n                    <button type="button" id="category2Btn_${e.id}" class="btn btn-lg btn-block" onclick="categoryClickHandler().category2('${e.id}','${e.name}')">${e.name}</button>\n                `}),$("#i_category2_list").html(t)},getCategory3:function(){CATEGORY3.forEach(e=>{t+=`\n                    <button type="button" id="category3Btn_${e.id}" class="btn btn-lg btn-block" onclick="categoryClickHandler().category3('${e.id}','${e.name}')">${e.name}</button>\n                `}),$("#i_category3_list").html(t)},getCategory4:function(){CATEGORY4.forEach(e=>{t+=`\n                    <button type="button" id="category4Btn_${e.id}" class="btn btn-lg btn-block" onclick="categoryClickHandler().category4('${e.id}','${e.name}')">${e.name}</button>\n                `}),$("#i_category4_list").html(t)}}}function loadCategorySelectHtml(){return{categorySelectHtml:function(){let t="";t+='\n                    <div class="col-sm-3 mt-1 mb-1 st-aitem-category-box ">\n                    <label class="st-aitem-required-text">*카테고리1 (필수)</label>\n                    <div id="i_category1_list" class="st-aitem-category-list-box ty-st-aitem-category-box">\n\n                    </div>\n                </div>\n                <div class="col-sm-3 mt-1 mb-1 st-aitem-category-box ">\n                    <label class="st-aitem-required-text">*카테고리2 (필수)</label>\n                    <div id="i_category2_list" class="st-aitem-category-list-box ty-st-aitem-category-box">\n\n                    </div>\n                </div>\n                <div class="col-sm-3 mt-1 mb-1 st-aitem-category-box ">\n                    <label>카테고리3 (선택)</label>\n                    <div id="i_category3_list" class="st-aitem-category-list-box ty-st-aitem-category-box">\n\n                    </div>\n                </div>\n                <div class="col-sm-3 mt-1 mb-1 st-aitem-category-box ">\n                    <label>카테고리4 (선택)</label>\n                    <div id="i_category4_list" class="st-aitem-category-list-box ty-st-aitem-category-box">\n\n                    </div>\n                </div>\n                    ',$("#ty_i_categorys_list").html('\n                    <div class="col-sm-3 mt-1 mb-1 st-aitem-category-box ">\n                    <label class="st-aitem-required-text">*카테고리1 (필수)</label>\n                    <div id="i_category1_list" class="st-aitem-category-list-box ty-st-aitem-category-box">\n\n                    </div>\n                </div>\n                <div class="col-sm-3 mt-1 mb-1 st-aitem-category-box ">\n                    <label class="st-aitem-required-text">*카테고리2 (필수)</label>\n                    <div id="i_category2_list" class="st-aitem-category-list-box ty-st-aitem-category-box">\n\n                    </div>\n                </div>\n                <div class="col-sm-3 mt-1 mb-1 st-aitem-category-box ">\n                    <label>카테고리3 (선택)</label>\n                    <div id="i_category3_list" class="st-aitem-category-list-box ty-st-aitem-category-box">\n\n                    </div>\n                </div>\n                <div class="col-sm-3 mt-1 mb-1 st-aitem-category-box ">\n                    <label>카테고리4 (선택)</label>\n                    <div id="i_category4_list" class="st-aitem-category-list-box ty-st-aitem-category-box">\n\n                    </div>\n                </div>\n                    ')}}}function loadCategorySearchHtml(){let t="";return{categorySearchHtml:function(){t+='\n                <div class="col-sm-6 my-1" >\n                    <input id="ty_i_category_search_input" class="ty-st-aitem-input" />\n                </div>\n            ',$("#ty_i_categorys_list").html(t)}}}function categoryClickHandler(){let t="";return{clickSelectCategory:function(){loadCategorySelectHtml().categorySelectHtml(),loadCategoryHtml().getCategory1(),$("#ty_i_category_select").addClass("ty-st-aitem-category-btn-active-right"),$("#ty_i_category_search").removeClass("ty-st-aitem-category-btn-active-left")},category1:async function(e,a){SELECTED_CATEGORY.category1Id=e,SELECTED_CATEGORY.category1Name=a,SELECTED_CATEGORY.category2Id=0,SELECTED_CATEGORY.category2Name="",SELECTED_CATEGORY.category3Id=0,SELECTED_CATEGORY.category3Name="",SELECTED_CATEGORY.category4Id=0,SELECTED_CATEGORY.category4Name="",$("#i_category3_list").html(""),$("#i_category4_list").html(""),loadCategoryHtml().getCategory1(),$("#category1Btn_"+e).css("background","#1d5a8d"),$("#category1Btn_"+e).css("color","white"),0!=SELECTED_CATEGORY.category1Id&&(t=""+SELECTED_CATEGORY.category1Name),$("#i_breadcrumb").html(t),await addItemDataConnect().getCategory().get("category2"),loadCategoryHtml().getCategory2()},category2:async function(e,a){SELECTED_CATEGORY.category2Id=e,SELECTED_CATEGORY.category2Name=a,SELECTED_CATEGORY.category3Id=0,SELECTED_CATEGORY.category3Name="",SELECTED_CATEGORY.category4Id=0,SELECTED_CATEGORY.category4Name="",$("#i_category4_list").html(""),loadCategoryHtml().getCategory2(),$("#category2Btn_"+e).css("background","#1d5a8d"),$("#category2Btn_"+e).css("color","white"),0!=SELECTED_CATEGORY.category1Id&&0!=SELECTED_CATEGORY.category2Id&&(t=`${SELECTED_CATEGORY.category1Name} > ${SELECTED_CATEGORY.category2Name}`),$("#i_breadcrumb").html(t),await addItemDataConnect().getCategory().get("category3"),loadCategoryHtml().getCategory3()},category3:async function(e,a){SELECTED_CATEGORY.category3Id=e,SELECTED_CATEGORY.category3Name=a,SELECTED_CATEGORY.category4Id=0,SELECTED_CATEGORY.category4Name="",loadCategoryHtml().getCategory3(),$("#category3Btn_"+e).css("background","#1d5a8d"),$("#category3Btn_"+e).css("color","white"),0!=SELECTED_CATEGORY.category1Id&&0!=SELECTED_CATEGORY.category2Id&&0!=SELECTED_CATEGORY.category3Id&&(t=`${SELECTED_CATEGORY.category1Name} > ${SELECTED_CATEGORY.category2Name} > ${SELECTED_CATEGORY.category3Name}`),$("#i_breadcrumb").html(t),await addItemDataConnect().getCategory().get("category4"),loadCategoryHtml().getCategory4()},category4:async function(e,a){SELECTED_CATEGORY.category4Id=e,SELECTED_CATEGORY.category4Name=a,loadCategoryHtml().getCategory4(),$("#category4Btn_"+e).css("background","#1d5a8d"),$("#category4Btn_"+e).css("color","white"),0!=SELECTED_CATEGORY.category1Id&&0!=SELECTED_CATEGORY.category2Id&&0!=SELECTED_CATEGORY.category3Id&&0!=SELECTED_CATEGORY.category4Id&&(t=`${SELECTED_CATEGORY.category1Name} > ${SELECTED_CATEGORY.category2Name} > ${SELECTED_CATEGORY.category3Name} > ${SELECTED_CATEGORY.category4Name}`),$("#i_breadcrumb").html(t)}}}function fileUploaderOpen(){$("#i_aitem_image_file").click()}async function uploadImage(){var t=$("#i_aitem_image_file").get()[0].files[0],e=new FormData;e.append("file",t),await addItemDataConnect().uploadImageAndReturnUrl(e),$("#i_aitem_image_file").val("")}function eventImageHandler(){return{loadImageHtml:function(){$("#i_aitem_image_box").html(`\n                <img src="${IMAGE_SELECTED}" class="st-aitem-image-el"/>\n            `),$("#i_aitem_image_control_box").show()},deleteImage:function(){IMAGE_SELECTED="",$("#i_aitem_image_control_box").hide(),$("#i_aitem_image_box").html('\n                <input type="file" name="i_aitem_image_file" id="i_aitem_image_file"\n                onchange="uploadImage()" accept="image/*" hidden>\n                <button type="button" class="st-aitem-image-btn" onclick="fileUploaderOpen()">\n                    <svg width="2.5em" height="2.5em" viewBox="0 0 17 16" class="bi bi-image"\n                        fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n                        <path fill-rule="evenodd"\n                            d="M14.002 2h-12a1 1 0 0 0-1 1v9l2.646-2.354a.5.5 0 0 1 .63-.062l2.66 1.773 3.71-3.71a.5.5 0 0 1 .577-.094L15.002 9.5V3a1 1 0 0 0-1-1zm-12-1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm4 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" />\n                    </svg>\n                </button>\n            ')}}}function eventIntegHandler(){return{submit:function(){if(this.checkHeaderTitleEmpty())return addItemSnackbarOpen("상품명을 입력하세요."),void $("#i_header_title").focus();if(this.checkCategoryFailure()){addItemSnackbarOpen("카테고리1 과 카테고리2 는 필수 선택 입니다.");var t=$("#i_aitem_category").offset();$("html").animate({scrollTop:t.top},400)}else{if(this.checkOptionsEmpty())return addItemSnackbarOpen("최소 1개 이상의 옵션은 유지해야 합니다."),void $("#i_option_input_el").focus();if(eventItemHandler().saveOthers(),this.checkCommitionValueOverLimit())addItemSnackbarOpen("마켓 수수료는 0~100%의 범위 값만 허용합니다.");else if(this.checkValueMakeError())return void addItemSnackbarOpen("수수료를 제외한 입력값은 정수만 가능합니다.");addItemDataConnect().setAllDataAndAddItem()}},checkHeaderTitleEmpty:function(){return""===$("#i_header_title").val()},checkCategoryFailure:function(){return!!(0==SELECTED_CATEGORY.category1Id|0==SELECTED_CATEGORY.category2Id)},checkOptionsEmpty:function(){return OPTIONS.length<=0},checkCommitionValueOverLimit:function(){for(let t=0;t<OPTIONS.length;t++)for(let e=0;e<OPTIONS[t].items.length;e++)if(OPTIONS[t].items[e].commitionCost>100|OPTIONS[t].items[e].commitionCost<0)return $("#i_item_commition_cost_"+OPTIONS[t].items[e].itemUUID).focus(),!0;return!1},checkValueMakeError:function(){for(let t=0;t<OPTIONS.length;t++)for(let e=0;e<OPTIONS[t].items.length;e++){if(!isInt(OPTIONS[t].items[e].price))return $("#i_item_price_"+OPTIONS[t].items[e].itemUUID).focus(),!0;if(!isInt(OPTIONS[t].items[e].customerTransCost))return $("#i_item_customer_trans_cost_"+OPTIONS[t].items[e].itemUUID).focus(),!0;if(!isInt(OPTIONS[t].items[e].sellerRealTransCost))return $("#i_item_seller_real_trans_cost_"+OPTIONS[t].items[e].itemUUID).focus(),!0;if(!isInt(OPTIONS[t].items[e].purchaseCost))return $("#i_item_purchase_cost_"+OPTIONS[t].items[e].itemUUID).focus(),!0;if(!isInt(OPTIONS[t].items[e].purchaseTransCost))return $("#i_item_purchase_trans_cost_"+OPTIONS[t].items[e].itemUUID).focus(),!0;if(!isInt(OPTIONS[t].items[e].extraCharge))return $("#i_item_purchase_extra_charge_"+OPTIONS[t].items[e].itemUUID).focus(),!0}return!1}}}function addItemDataConnect(){return{getCategory:function(){return{get:async t=>{"category1"===t?await $.ajax({url:"/api/item_manger/category/get_category1/all",type:"GET",contentType:"application/json",dataType:"json",success:function(t){CATEGORY1=t},error:function(t){console.log(t)}}):"category2"===t?await $.ajax({url:"/api/item_manger/category/get_category2/val",type:"GET",contentType:"application/json",dataType:"json",data:{ic1:SELECTED_CATEGORY.category1Id},success:function(t){CATEGORY2=t},error:function(t){console.log(t)}}):"category3"===t?await $.ajax({url:"/api/item_manger/category/get_category3/val",type:"GET",contentType:"application/json",dataType:"json",data:{ic1:SELECTED_CATEGORY.category1Id,ic2:SELECTED_CATEGORY.category2Id},success:function(t){CATEGORY3=t},error:function(t){console.log(t)}}):"category4"===t&&await $.ajax({url:"/api/item_manger/category/get_category4/val",type:"GET",contentType:"application/json",dataType:"json",data:{ic1:SELECTED_CATEGORY.category1Id,ic2:SELECTED_CATEGORY.category2Id,ic3:SELECTED_CATEGORY.category3Id},success:function(t){CATEGORY4=t},error:function(t){console.log(t)}})}}},getStoreData:async function(){await $.ajax({url:"/api/item_store/get/all",type:"GET",contentType:"application/json",dataType:"json",success:function(t){STORE_LIST=t},error:function(t){console.log(t)}})},uploadImageAndReturnUrl:async function(t){await $.ajax({url:"/api/fileupload/image",type:"POST",enctype:"multipart/form-data",contentType:!1,processData:!1,dataType:"json",data:t,beforeSend:function(t){t.setRequestHeader("X-XSRF-TOKEN",$("#i_aitem_csrf").val())},success:function(t){"SUCCESS"===t.message?(IMAGE_SELECTED=t.imageUrl,eventImageHandler().loadImageHtml()):alert("image undefined")}})},setAllDataAndAddItem:function(){ITEM_CLASSIFY={classifyUUID:uuidv4(),classifyName:$("#i_header_title").val(),classifyDesc:$("#i_header_desc").val(),classifyImage:IMAGE_SELECTED,categorys:SELECTED_CATEGORY,options:OPTIONS};let t=JSON.stringify(ITEM_CLASSIFY);$.ajax({url:"/api/item_manager/additem/add",type:"POST",contentType:"application/json",dataType:"json",data:t,beforeSend:function(t){t.setRequestHeader("X-XSRF-TOKEN",$("#i_aitem_csrf").val())},success:function(t){"SUCCESS"===t.message?window.location.href="/profit":"USER_INVALID"===t.message?(alert("세션이 만료되었습니다."),window.location.href="/login"):alert("server error code : AIC500 fail")},error:function(t){console.log(t),alert("server error code : AIC500 error")}})}}}function loadItemHtml(){return $((function(){$("#i_option_group").enableCellNavigation()})),{returnItemListLoad:function(t){let e="";return items=t.items,items.forEach((a,i)=>{let n=`\n                    <div class="">\n                        <input type="text" class="form-control ty-st-aitem-input item-price-input" \n                            id="i_item_commition_cost_${a.itemUUID}" \n                            onkeypress="return isActualNumberKey(event)" \n                            onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');" \n                            value=${a.commitionCost}></input>\n                    </div>\n                `,o=`\n                    <div class="">\n                        <input type="text" class="form-control ty-st-aitem-input item-price-input" \n                            id="i_item_price_${a.itemUUID}" \n                            onkeypress="return isNumberKey(event)" \n                            onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');" \n                            value=${a.price}></input>\n                    </div>\n                `,s=`\n                    <div class="">\n                        <input type="text" class="form-control ty-st-aitem-input item-price-input" \n                            id="i_item_customer_trans_cost_${a.itemUUID}" \n                            onkeypress="return isNumberKey(event)" \n                            onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');" \n                            value=${a.customerTransCost}></input>\n                    </div>\n                `,c=`\n                    <div class="">\n                        <input type="text" class="form-control ty-st-aitem-input item-price-input" \n                            id="i_item_seller_real_trans_cost_${a.itemUUID}" \n                            onkeypress="return isNumberKey(event)" \n                            onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');" \n                            value=${a.sellerRealTransCost}></input>\n                    </div>\n                `,l=`\n                    <div class="">\n                        <input type="text" class="form-control ty-st-aitem-input item-price-input" \n                            id="i_item_purchase_cost_${a.itemUUID}" \n                            onkeypress="return isNumberKey(event)" \n                            onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');" \n                            value=${a.purchaseCost}></input>\n                    </div>\n                `,r=`\n                    <div class="">\n                        <input type="text" class="form-control ty-st-aitem-input item-price-input" \n                            id="i_item_purchase_trans_cost_${a.itemUUID}" \n                            onkeypress="return isNumberKey(event)" \n                            onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');" \n                            value=${a.purchaseTransCost}></input>\n                    </div>\n                `,_=`\n                    <div class="">\n                        <input type="text" class="form-control ty-st-aitem-input item-price-input" \n                            id="i_item_extra_charge_${a.itemUUID}" \n                            onkeypress="return isNumberKey(event)" \n                            onkeyup="this.value=this.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');" \n                            value=${a.extraCharge}></input>\n                    </div>\n                `;e+=`\n                    <tr class="text-center">\n                        <th scope="row">${i+1}</th>\n                        <td ><button type="button" class="btn btn-danger" onclick="eventItemHandler().deleteOne('${t.optionUUID}','${a.itemUUID}')">삭제</button></td>\n                        <td class="align-middle">${a.storeName}</td>\n                        <td>${n}</td>\n                        <td>${o}</td>\n                        <td>${s}</td>\n                        <td>${c}</td>\n                        <td>${l}</td>\n                        <td>${r}</td>\n                        <td>${_}</td>\n                    </tr>\n                `}),`\n            \n                <table class="table overflow-table">\n                    <thead class="ty-st-aitem-thead">\n                    <tr class="text-center">\n                        <th scope="col" width="50">#</th>\n                        <th scope="col" width="80">컨트롤러</th>\n                        <th scope="col" width="110">마켓 종류</th>\n                        <th scope="col" width="200">마켓 수수료<div class="st-sd-sell-unit">단위 : [%]</div></th>\n                        <th scope="col" width="200">개당 판매가<span class="text-success">(+)</span><div class="st-sd-sell-unit">단위 : [원]</div></th>\n                        <th scope="col" width="200">개당 소비자 운임비용<span class="text-success">(+)</span><div class="st-sd-sell-unit">단위 : [원]</div></th>\n                        <th scope="col" width="200">개당 판매자 실질 운임비용<span class="text-danger">(-)</span><div class="st-sd-sell-unit">단위 : [원]</div></th>\n                        <th scope="col" width="200">개당 매입 가격 | 구매 비용<span class="text-danger">(-)</span><div class="st-sd-sell-unit">단위 : [원]</div></th>\n                        <th scope="col" width="200">개당 매입 운임 비용<span class="text-danger">(-)</span><div class="st-sd-sell-unit">단위 : [원]</div></th>\n                        <th scope="col" width="200">개당 기타 비용<span class="text-danger">(-)</span><div class="st-sd-sell-unit">단위 : [원]</div></th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                        ${e}\n                    </tbody>\n                </table>\n                \n            `}}}function eventItemHandler(){return{saveOthers:function(){OPTIONS.forEach(t=>{t.remainingCount=$("#i_option_remaining_count_"+t.optionUUID).val(),t.items.forEach(t=>{t.commitionCost=$("#i_item_commition_cost_"+t.itemUUID).val()?$("#i_item_commition_cost_"+t.itemUUID).val():"0",t.price=$("#i_item_price_"+t.itemUUID).val()?$("#i_item_price_"+t.itemUUID).val():"0",t.customerTransCost=$("#i_item_customer_trans_cost_"+t.itemUUID).val()?$("#i_item_customer_trans_cost_"+t.itemUUID).val():"0",t.sellerRealTransCost=$("#i_item_seller_real_trans_cost_"+t.itemUUID).val()?$("#i_item_seller_real_trans_cost_"+t.itemUUID).val():"0",t.purchaseCost=$("#i_item_purchase_cost_"+t.itemUUID).val()?$("#i_item_purchase_cost_"+t.itemUUID).val():"0",t.purchaseTransCost=$("#i_item_purchase_trans_cost_"+t.itemUUID).val()?$("#i_item_purchase_trans_cost_"+t.itemUUID).val():"0",t.extraCharge=$("#i_item_extra_charge_"+t.itemUUID).val()?$("#i_item_extra_charge_"+t.itemUUID).val():"0"})})},deleteOne:function(t,e){this.saveOthers(),OPTIONS.forEach(a=>{if(a.optionUUID===t){if(a.items.length<=1)return void addItemSnackbarOpen("적어도 하나의 아이템은 유지해야 합니다. <br/>삭제가 필요한 경우 옵션을 삭제해 주세요.");a.items=a.items.filter(t=>t.itemUUID!=e)}}),loadOptionHtml().optionGroupLoad()}}}async function init(){regAddItemGlobalObjectInitialize(),await loadAddItemInitializeData(),loadAddItemInitializeHtml(),regAddItemInitailizeHandler()}async function loadAddItemInitializeData(){await addItemDataConnect().getCategory().get("category1"),await addItemDataConnect().getStoreData()}async function loadAddItemInitializeHtml(){loadStoreHtml().storeOptionListLoad(),loadCategorySelectHtml().categorySelectHtml(),loadCategoryHtml().getCategory1()}function regAddItemInitailizeHandler(){addItemOptionEventListener()}function regAddItemGlobalObjectInitialize(){addItemObjectInit()}function addItemSnackbarOpen(t){var e=document.getElementById("st-aitem-snackbar");e.innerHTML=t,e.className="show",setTimeout((function(){e.className=e.className.replace("show","")}),3e3)}function addItemObjectInit(){ITEM_CLASSIFY={classifyUUID:uuidv4(),classifyName:"",classifyDesc:"",classifyImage:"",categorys:{},options:[]},STORE_LIST=[],CATEGORY1=[],CATEGORY2=[],CATEGORY3=[],CATEGORY4=[],SELECTED_CATEGORY={category1Id:0,category1Name:"",category2Id:0,category2Name:"",category3Id:0,category3Name:"",category4Id:0,category4Name:""},SEARCHED_CATEGORY=[],OPTIONS=[],OPTION_SELECTED=[],STORE_SELECTED=[],IMAGE_SELECTED="",SELECTED_STORE_MODAL=[]}function addItemOptionEventListener(){$("#i_option_input_el").on("keydown",(function(t){13===t.keyCode&&$("#i_option_input_btn").click()}))}function setInitialOptionData(t){return{optionUUID:uuidv4(),name:t,remainingCount:"0",sellCount:"0",items:[]}}function setInitialItemData(t,e){return{itemUUID:uuidv4(),storeName:t,storeType:e,commitionCost:"0",price:"0",customerTransCost:"0",sellerRealTransCost:"0",purchaseCost:"0",purchaseTransCost:"0",extraCharge:"0"}}function loadOptionHtml(){return{optionSelectedListLoad:function(){let t="";if(0===OPTION_SELECTED.length)return $("#i_option_selected_list_box").html("");OPTION_SELECTED.forEach(e=>{t+=`\n                    <li class="ty-st-atime-option-list">\n                        <span class="ty-st-atime-option-list-el form-group">${e.name}\n                        <button class="ty-st-atime-option-list-btn" onclick="eventOptionHandler().deleteOptionSelectClick('${e.id}')">\n                        <i class="fas fa-times">\n                        <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n                        </i>\n                        </button>\n                        </span>\n                    </li>\n                `});let e=`\n            \n                \n                    <ul class="ty-st-atime-option-list-ul">\n                        ${t}\n                    </ul>\n               \n            \n            `;$("#i_option_selected_list_box").html(e)},optionGroupLoad:function(){let t="";OPTIONS.forEach((e,a)=>{let i=`\n                    <div class="st-aitem-box  clearfix">\n                        <div class="st-aitem-option-group-title">\n                            <div class="st-aitem-title-box">\n                               \n                                    <h4 class="st-aitem-title-el">옵션 ${a+1}. ${e.name}</h4>\n                               \n                            </div>\n                        </div>                        \n                        <div class="ty-st-aitem-option-group-table-container">\n                            <div id="i_items_group_${e.optionUUID}" class="table-responsive list-table-box ty-list-table-box">\n                                ${loadItemHtml().returnItemListLoad(e)}\n                            </div>\n                            <div class="ty-st-option-table-footer-box">\n                            <div class="ty-st-option-table-footer-wrapper">\n                                <div class="col-sm-8 ty-st-option-table-remaining-box">\n                                    <button class="btn ty-st-option-table-footer-btn mr-1" onclick="eventOptionHandler().batchModeOpen('${e.optionUUID}')">일괄등록</button>\n                                    <button class="btn btn-danger" onclick="eventOptionHandler().deleteOptOne('${e.optionUUID}')">옵션 삭제</button>\n                                </div>\n                                <div class="col-sm-4 ty-st-option-table-remaining-box">\n                                <span for="i_option_remaining_count_${e.optionUUID}" class="col-sm-4">옵션 재고 수량</span>\n                                <input type="number" id="i_option_remaining_count_${e.optionUUID}" class="col-sm-8 ty-st-aitem-input" value="${e.remainingCount}" min="0"/>\n                                </div>\n                            </div>\n                        </div>\n                        </div>\n                    </div>\n                `;t+=i}),$("#i_option_group").html(t)}}}function eventOptionHandler(){return{addOptionSelectClick:function(){addOptionValueSplit=$("#i_option_input_el").val().split(","),addOptionValueSplit.forEach(t=>{if(""!==t){let e={id:uuidv4(),name:t};$("#i_option_input_el").val(""),$("#i_option_input_el").focus(),OPTION_SELECTED.push(e),loadOptionHtml().optionSelectedListLoad()}})},deleteOptionSelectClick:function(t){OPTION_SELECTED=OPTION_SELECTED.filter(e=>e.id!=t),loadOptionHtml().optionSelectedListLoad()},setOptsClick:function(){0===OPTION_SELECTED.length|0===STORE_SELECTED.length||this.setOptsDataAndLoadHtml()},setOptsDataAndLoadHtml:function(){eventItemHandler().saveOthers(),OPTION_SELECTED.forEach(t=>{let e=[];STORE_SELECTED.forEach(t=>{e.push(setInitialItemData(t.storeName,t.storeType))});let a=setInitialOptionData(t.name);a.items=e,OPTIONS.push(a)}),loadOptionHtml().optionGroupLoad()},batchModeOpen:function(t){let e=OPTIONS.filter(e=>e.optionUUID===t)[0];"0"===$("#i_item_batch_input_price").val()?($("#i_item_batch_input_commition_cost").val("0"),$("#i_item_batch_input_price").val("0"),$("#i_item_batch_input_customer_trans_cost").val("0"),$("#i_item_batch_input_seller_real_trans_cost").val("0"),$("#i_item_batch_input_purchase_cost").val("0"),$("#i_item_batch_input_purchase_trans_cost").val("0"),$("#i_item_batch_input_extra_charge").val("0"),$("#i_item_batch_input_modalLabel").html("옵션명 : "+e.name),$("#i_item_batch_input_select_uuid").val(t),$("#i_item_batch_input_modal").modal("toggle")):"0"!==$("#i_item_batch_input_price").val()&&($("#i_item_batch_input_commition_cost").val($("#i_item_batch_input_commition_cost").val()),$("#i_item_batch_input_price").val($("#i_item_batch_input_price").val()),$("#i_item_batch_input_customer_trans_cost").val($("#i_item_batch_input_customer_trans_cost").val()),$("#i_item_batch_input_seller_real_trans_cost").val($("#i_item_batch_input_seller_real_trans_cost").val()),$("#i_item_batch_input_purchase_cost").val($("#i_item_batch_input_purchase_cost").val()),$("#i_item_batch_input_purchase_trans_cost").val($("#i_item_batch_input_purchase_trans_cost").val()),$("#i_item_batch_input_extra_charge").val($("#i_item_batch_input_extra_charge").val()),$("#i_item_batch_input_modalLabel").html("옵션명 : "+e.name),$("#i_item_batch_input_select_uuid").val(t),$("#i_item_batch_input_modal").modal("toggle"))},checkBatchModeDataEmpty:function(t,e,a,i,n,o,s){return!!(""==t|""==e|""==a|""==i|""==n|""==o|""==s)},setBatchModeData:function(){if(this.checkBatchModeDataEmpty($("#i_item_batch_input_commition_cost").val(),$("#i_item_batch_input_price").val(),$("#i_item_batch_input_customer_trans_cost").val(),$("#i_item_batch_input_seller_real_trans_cost").val(),$("#i_item_batch_input_purchase_cost").val(),$("#i_item_batch_input_purchase_trans_cost").val(),$("#i_item_batch_input_extra_charge").val()))return void alert("빈 값은 허용되지 않습니다.");eventItemHandler().saveOthers();let t=$("#i_item_batch_input_select_uuid").val();OPTIONS.forEach(e=>{e.optionUUID===t&&e.items.forEach(t=>{t.commitionCost=$("#i_item_batch_input_commition_cost").val(),t.price=$("#i_item_batch_input_price").val(),t.customerTransCost=$("#i_item_batch_input_customer_trans_cost").val(),t.sellerRealTransCost=$("#i_item_batch_input_seller_real_trans_cost").val(),t.purchaseCost=$("#i_item_batch_input_purchase_cost").val(),t.purchaseTransCost=$("#i_item_batch_input_purchase_trans_cost").val(),t.extraCharge=$("#i_item_batch_input_extra_charge").val(),$("#i_item_batch_input_commition_cost").val(""+t.commitionCost),$("#i_item_batch_input_price").val(""+t.price)})}),loadOptionHtml().optionGroupLoad(),$("#i_item_batch_input_modal").modal("toggle")},deleteOptOne:function(t){eventItemHandler().saveOthers(),OPTIONS=OPTIONS.filter(e=>e.optionUUID!=t),loadOptionHtml().optionGroupLoad()}}}function loadStoreHtml(){return{storeSelectedListLoad:function(){let t="";if(0===STORE_SELECTED.length)return $("#i_store_selected_list_box").html("");STORE_SELECTED.forEach(e=>{t+=`\n                    <li class="ty-st-atime-option-list">\n                        <span class="ty-st-atime-option-list-el form-group">${e.storeName}\n                        <button class="ty-st-atime-option-list-btn" onclick="eventStoreHandler().deleteStoreSelectClick('${e.id}')">\n                            <i class="fas fa-times">\n                                <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n                            </i>\n                        </button>\n                        </span>\n                    </li>\n                `});let e=`\n                \n                    <ul class="ty-st-atime-option-list-ul">\n                        ${t}\n                    </ul>\n                \n            `;$("#i_store_selected_list_box").html(e)},storeOptionListLoad:function(){let t="";STORE_LIST.forEach(e=>{t+=`\n                    <span>\n                        <button class="btn ty-st-aitem-store-list-btn" id="ty-st-aitem-store-list-btn-${e.storeType}" onclick="eventStoreHandler().addStoreSelect('${e.storeType}','${e.storeName}')">${e.storeName}</button>\n                    </span> \n                `}),$("#i_store_select_modal_body").html(t)}}}function eventStoreHandler(){return{addStoreSelect:function(t,e){let a=!0;if(SELECTED_STORE_MODAL=SELECTED_STORE_MODAL.filter(e=>(e.storeType===t&&(a=!1,$("#ty-st-aitem-store-list-btn-"+t).removeClass("ty-st-aitem-store-list-btn-active")),e.storeType!=t)),a){let a={id:uuidv4(),storeName:e,storeType:t};SELECTED_STORE_MODAL.push(a),$("#ty-st-aitem-store-list-btn-"+t).addClass("ty-st-aitem-store-list-btn-active")}},setStoreSelectedData:function(){STORE_SELECTED=SELECTED_STORE_MODAL,SELECTED_STORE_MODAL.forEach(t=>{$("#ty-st-aitem-store-list-btn-"+t.storeType).removeClass("ty-st-aitem-store-list-btn-active")}),SELECTED_STORE_MODAL=[],loadStoreHtml().storeSelectedListLoad(),$("#i_store_select_modal").modal("toggle")},deleteStoreSelectClick:function(t){STORE_SELECTED=STORE_SELECTED.filter(e=>e.id!=t),loadStoreHtml().storeSelectedListLoad()}}}init(),function(t){t.fn.enableCellNavigation=function(){var e=37,a=38,i=39,n=40;this.find("input").keydown((function(o){if(!(t.inArray(o.which,[e,a,i,n])<0)){var s=o.target,c=t(o.target).closest("td"),l=null;switch(o.which){case e:0==s.selectionStart&&(l=c.prev("td:has(input,textarea)"));break;case i:s.selectionEnd==s.value.length&&(l=c.next("td:has(input,textarea)"));break;case a:case n:var r=c.closest("tr"),_=c[0].cellIndex,m=null;o.which==n?m=r.next("tr"):o.which==a&&(m=r.prev("tr")),m.length&&(l=t(m[0].cells[_]))}l&&l.length&&(o.preventDefault(),l.find("input,textarea").each((function(t,e){e.focus(),e.select()})))}}))}}(jQuery);